\documentclass[%
  fontsize=10pt,
%  BCOR5mm,
%  paper=a4,
%draft,
  abstractoff,
  bibliography=totoc,
  cleardoublepage=empty,
  fleqn,
  footinclude,
  headinclude,
  index=totoc,
  listof=totoc,
  numbers=noenddot,
  open=right,
  titlepage,
  twoside
]{scrbook}
            
\usepackage[german,english]{babel}
\usepackage[numbers]{natbib}
\usepackage{classicthesis-ldpkg} 
%*******************************************************
% Options for classicthesis.sty:
% tocaligned eulerchapternumbers drafting linedheaders listsseparated
% subfig nochapters beramono eulermath parts minionpro pdfspacing
\usepackage[eulerchapternumbers,pdfspacing,listsseparated,%drafting,
            subfig,beramono,parts]{classicthesis}

\usepackage{thm-autoref}

\hypersetup{%
  bookmarksnumbered,
  bookmarksopen=true,
  bookmarksopenlevel=0,
  breaklinks=true,
%  citecolor=black,
%  colorlinks=true,
  hypertexnames=true,
%  linkcolor=black,
  linktocpage=true,
  pageanchor=true,
  pdfauthor={Niels Lohmann},
  pdfhighlight=/O,
  pdfpagemode=UseOutlines,
  pdfstartview=FitV,
  pdfsubject={PhD Thesis},
  pdftitle={Correctness of services and their composition},
  plainpages=false,
  pdfkeywords={service, composition, choreography, correctness, controllability, realizability, compatibility, responsiveness, service automata, operating guidelines, WS-BPEL, BPMN, validation, selection, restriction, diagnosis, completion, correction, verification, realization, Wendy, Fiona, LoLA, Rachel, Rebecca, BPEL2oWFN, correctness by construction, correctness by verfication, formalization, SOA, SOC}
%  urlcolor=black
}

%    urlcolor=webbrown, linkcolor=RoyalBlue, citecolor=webgreen}

% Befehl um Text zu Beginn eines Kapitels zu schreiben
\newcommand{\chapintro}[1]{
\begin{flushright}
{\small\slshape #1}
\end{flushright}
\vspace{1em}}

\usepackage{amsmath, amsthm, amssymb}

% Anpassung der enumerate-Umgebung
\usepackage{enumerate}
\usepackage{enumitem}
\setitemize{leftmargin=1em}
\setenumerate{leftmargin=1.3em}
\renewcommand{\labelitemi}{--}

\newenvironment{myitemize}
{
\begin{itemize}
  \setlength{\itemsep}{0em}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}}
{\end{itemize}}

\newenvironment{niceitemize}
{
\begin{list}{\labelitemi}{\leftmargin=0em}}
{\end{list}}

\newcounter{nicecount}
\newenvironment{niceenumerate}
{
\begin{list}{\arabic{nicecount}.}{\usecounter{nicecount}\leftmargin=0em\itemsep=0em\topsep=0.5em}}
{\end{list}}

\newenvironment{myenumerate}
{
\begin{enumerate}
  \setlength{\itemsep}{0em}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}}
{\end{enumerate}}



\newcommand{\Bags}{\mathop{Bags}}
\newcommand{\E}{\ensuremath\mathds{E}}
%\newcommand{\Lab}{\mathop{Lab}}
\newcommand{\Match}{\mathop{Match}}
\newcommand{\M}{\ensuremath\mathds{M}}
\newcommand{\Strat}{\mathop{Strat}}
\newcommand{\TS}{\mathit{T\!S}}
\renewcommand{\acronym}[1]{\mbox{\large\MakeTextLowercase{\scshape #1}}}
\newcommand{\acronymit}[1]{{{\small #1}}}
\newcommand{\bl}{{\mathop{bl}}}
\newcommand{\bpelchor}{\acronym{BPEL}$4$Chor{}}
\newcommand{\bpelowfn}{\acronym{BPEL}$2$oWFN{}}
\newcommand{\bpel}[1]{\texttt{#1}}
\newcommand{\mset}[1]{[#1]}
\newcommand{\closed}{\ensuremath\oblong}
\newcommand{\closure}{\mathop{closure}}
\newcommand{\project}{\mathop{project}}
\newcommand{\define}[1]{\textsl{#1}}
\newcommand{\emptymset}{\ensuremath[\,]}
\newcommand{\final}{\mathit{final}}
\newcommand{\lab}{\mathop{lab}}
\newcommand{\open}{\ensuremath\sqcup}
\newcommand{\OG}{\mathop{OG}}
\newcommand{\Prov}{\mathit{Prov}}
\newcommand{\Req}{\mathit{Req}}
\newcommand{\send}{!}
\newcommand{\sync}{!\!\textsl{?}}
\newcommand{\wrt}{w.\,r.\,t.\xspace}

\usepackage{thm-autoref}

% the inner of a definition
\newtheoremstyle{mydef}{0em}{0em}{}{}{\bfseries\upshape}{}{ }{}

\theoremstyle{mydef}
\newtheorem{defi}{Definition}[chapter]
%\newtheorem{them}{Theorem}[chapter]
\newtheorem{lem}{Lemma}[chapter]
\newtheorem{prop}{Proposition}[chapter]
\newtheorem{coro}{Corollary}[chapter]

\usepackage{pifont}

\usepackage{framed}
\definecolor{shadecolor}{gray}{0.9} %es gibt auch leftbar!

\newenvironment{definition}[1]{\begin{shaded}\begin{defi}{\upshape\textbf{(#1).}}\newline\parindent0em
\parskip0.5em}{\end{defi}\end{shaded}}

%\newenvironment{theorem}[1]{\begin{shaded}\begin{them}{\upshape\textbf{\!\!: #1}}$\empty$\newline\parindent0em
%\parskip0.5em}{\end{them}\end{shaded}}

\newenvironment{corollary}[1]{\begin{shaded}\begin{coro}{\upshape\textbf{(#1).}}$\empty$\newline\parindent0em
\parskip0.5em}{\end{coro}\end{shaded}}

\newenvironment{proposition}[1]{\begin{shaded}\begin{prop}{\upshape\textbf{(#1).}}$\empty$\newline\parindent0em
\parskip0.5em}{\end{prop}\end{shaded}}

\newenvironment{lemma}[1]{\begin{shaded}\begin{lem}{\upshape\textbf{(#1).}}$\empty$\newline\parindent0em
\parskip0.5em}{\end{lem}\end{shaded}}



% ======================================================
% \Autoref is for the beginning of the sentence
%http://www.latex-community.org/forum/viewtopic.php?f=4&t=334
\let\orgautoref\autoref
\providecommand{\Autoref}[1]
{%
\def\algorithmautorefname{Algorithm}%
\def\defiautorefname{Definition}%
\def\equationautorefname{Equation}%
\def\figureautorefname{Figure}%
\def\lemautorefname{Lemma}%
\def\propautorefname{Proposition}%
\def\coroautorefname{Corollary}%
\def\chapterautorefname{Chapter}%
\def\sectionautorefname{Section}%
\def\subfigureautorefname{Figure}%
\def\tableautorefname{Table}%
%\def\themautorefname{Theorem}%
\orgautoref{#1}%
}

\renewcommand{\autoref}[1]
{%
\def\algorithmautorefname{Alg.}%
\def\defiautorefname{Def.}%
\def\equationautorefname{Eq.}%
\def\figureautorefname{Fig.}%
\def\lemautorefname{Lem.}%
\def\chapterautorefname{Chap.}%
\def\propautorefname{Prop.}%
\def\coroautorefname{Cor.}%
\def\sectionautorefname{Sect.}%
\def\subfigureautorefname{Fig.}%
\def\tableautorefname{Tab.}%
%\def\themautorefname{Thm.}%
\orgautoref{#1}%
}
% ====================================================


% needed to edit /usr/local/texlive/2008/texmf-dist/tex/latex/eco/T1cmor.fd
\usepackage{eco}
\usepackage{dsfont}
\usepackage{makeidx}
\usepackage{multicol}
\usepackage{soul}
\usepackage[bottom]{footmisc}
\usepackage{url}
\usepackage{stmaryrd}
\usepackage{supertabular}
\usepackage{lettrine}
\renewcommand{\LettrineFontHook}{\fontseries{bx}\color{halfgray}} 

\usepackage{algorithm2e,caption}
\restylealgo{ruled}\linesnumbered

%\usepackage[noend]{algorithmic}
%\usepackage{algorithm}
%\renewcommand{\algorithmicrequire}{\textbf{Input:}}
%\renewcommand{\algorithmicensure}{\textbf{Output:}}

\usepackage{graphicx}
\graphicspath{{figs/}}
\newcommand{\subfigureautorefname}{\figureautorefname}
\Setnlsty{textbf}{\tiny$}{$}





%% LAYOUT FOR EINDHOVEN !
%% to be used only for the printing office!
%\usepackage[dvips,
%            papersize={170mm,240mm},
%            twoside,
%            headheight=1cm,                         % some high enough number to contain header
%            headsep=8mm,                            % distance between header and text
%%            top=31mm,                               % number when test print was made
%            top=29mm,                               % total height to text (incl. space for header)
%            height=185mm,heightrounded,             % height of text; rounded to a natural number of lines
%            footskip=\baselineskip+\headsep+1mm,    % should be sum of footer height and \headsep
%            inner=21mm,%outer=25mm,
%%            centering,
%            textwidth=124mm,                       % computed from boundaries
%%            showframe%
%           ]{geometry}

\usepackage[twoside, papersize={170mm, 240mm}, inner=15mm, outer=25mm, top=25mm, vmarginratio=2:3]{geometry}
%\usepackage[twoside, papersize={170mm, 240mm}, inner=15mm, outer=25mm, vcentering]{geometry}
%\usepackage[twoside, papersize={170mm, 240mm}, textwidth=124mm, outer=18mm, top=18mm, vmarginratio=2:3]{geometry}

%\usepackage[papersize={170mm,240mm}, twoside, headheight=1cm, headsep=8mm, top=29mm, height=185mm, heightrounded, inner=21mm, textwidth=124mm]{geometry}


% No space between bibtex entries
\let\oldthebibliography=\thebibliography
  \let\endoldthebibliography=\endthebibliography
  \renewenvironment{thebibliography}[1]{%

    \begin{oldthebibliography}{#1}%
        \setlength{\parskip}{0ex}%
%      \small
     \footnotesize
       \setlength{\itemsep}{0.5ex}%
  }%
  {%
    \end{oldthebibliography}%
\bigskip
\bigskip
  All links were last followed on \today.
  }


\def\hyph{-\penalty0\hskip0pt\relax} 
\hyphenpenalty=400

%\frenchspacing


\usepackage[intoc]{nomencl}
%\let\abbrev\nomenclature
\renewcommand{\nomname}{Glossary}
\setlength{\nomlabelwidth}{.2\hsize}
\renewcommand{\nomlabel}[1]{#1 \dotfill}
\setlength{\nomitemsep}{-\parsep}
%\renewcommand{\nomgroup}[1]{\medskip}

\makenomenclature

\nomenclature[WS-BPEL]{\acronym{WS-BPEL}}{Web Service Business Process Execution Language~\cite{standard_bpel}}%
\nomenclature[BPMN]{\acronym{BPMN}}{Business Process Modeling Notation~\cite{standard_bpmn}}%
\nomenclature[iBPMN]{i\acronym{BPMN}}{\acronym{BPMN} extension for interaction modeling~\cite{DeckerB_2007_bpmw}}%
\nomenclature[WS-CDL]{\acronym{WS-CDL}}{Web Service Choreography Description Language~\cite{standard_wscdl}}%
\nomenclature[MSC]{\acronym{MSC}}{Message Sequence Chart~\cite{standard_msc}}%
\nomenclature[BPEL4Chor]{\bpelchor}{\acronym{WS-BPEL} extension for choreography modeling~\cite{DeckerKLW_2007_icws}}%
\nomenclature[UML]{\acronym{UML}}{Unified Modeling Language~\cite{standard_uml}}%
\nomenclature[WSDL]{\acronym{WSDL}}{Web Service Description Language~\cite{standard_wsdl}}%
\nomenclature[CCS]{\acronym{CCS}}{Calculus of Communicating Systems~\cite{Milner_1980_ccs}}
\nomenclature[SOC]{\acronym{SOC}}{service-oriented computing~\cite{Papazoglou_2001_cacm}}%
\nomenclature[SOA]{\acronym{SOA}}{service-oriented architecture~\cite{Gottschalk00}}%

\hyphenation{in-fra-struc-ture back-and-forth lem-ma Lem-ma}


%\SetExpansion[context=sloppy, stretch=0, shrink=200, step=5] { encoding = {OT1,T1,TS1} } { }

\makeindex

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\include{content/titlepage}

%\frontmatter%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\include{content/abstract}

{
\setcounter{tocdepth}{1}
\pagestyle{myheadings}
\markleft{\spacedlowsmallcaps{Contents}}
\markright{\spacedlowsmallcaps{Contents}}
\tableofcontents
}
%\pagestyle{normal}

%\mainmatter%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\include{content/intro}
\include{content/background}

\part{Correctness of Services}\label{part1}
\include{content/validation}
\include{content/diagnosis}

\part{Correctness of \mbox{Service Compositions}}\label{part2}
\include{content/verification}
\include{content/correction}

\part{Correctness of \mbox{Service Choreographies}}\label{part3}
\include{content/realization}

\include{content/conclusion}

% Zauberei von Dirk
\makeatletter
\renewcommand\toclevel@chapter{-1}%
\makeatother

%\appendix%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\addtocontents{toc}{\vspace{1em}}

%\backmatter%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\listoffigures
%\listoftables

% no headings any more
\pagestyle{myheadings}



%\fontsize{10}{12}
%\selectfont

\include{content/theses}

\markleft{\spacedlowsmallcaps{Bibliography}}
\markright{\spacedlowsmallcaps{Bibliography}}
\bibliographystyle{spmpscinat} %spmpscinat unsrtnat
\bibliography{bibs/phd,bibs/fremd}

\markleft{\spacedlowsmallcaps{Glossary}}
\markright{\spacedlowsmallcaps{Glossary}}
\printnomenclature

%\include{content/summary}


%\addtocontents{toc}{\vspace{1em}}
\include{content/rostock}


\markleft{\spacedlowsmallcaps{Acknowledgments}}
\markright{\spacedlowsmallcaps{Acknowledgments}}
\include{content/acknowledgements}

%\printindex


\include{content/siks}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
